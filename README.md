# 프론트엔드 CI/CD 파이프라인

## 개요

[예시이미지](https://file.notion.so/f/f/83c75a39-3aba-4ba4-a792-7aefe4b07895/6912169d-ce70-41bf-b624-946d4ee984eb/Untitled.png?id=85426052-e1c3-43af-bfb0-4dea20954fc0&table=block&spaceId=83c75a39-3aba-4ba4-a792-7aefe4b07895&expirationTimestamp=1722038400000&signature=ZcRd8Kee9jOSTXVrXwb-0MnkmqTRTUaD0R-Pg6AY8iI&downloadName=Untitled.png)

GitHub Actions에 워크플로우를 작성해 다음과 같이 배포가 진행되도록 함

1. 저장소를 체크아웃합니다.
2. Node.js 18.x 버전을 설정합니다.
3. 프로젝트 의존성을 설치합니다.
4. Next.js 프로젝트를 빌드합니다.
5. AWS 자격 증명을 구성합니다.
6. 빌드된 파일을 S3 버킷에 동기화합니다.
7. CloudFront 캐시를 무효화합니다.

## 주요 링크

- [S3 버킷 웹사이트 엔드포인트](http://assignment-6-advanced.s3-website.ap-northeast-2.amazonaws.com/)
- [CloudFrount 배포 도메인 이름](https://d16h0q0dfztggr.cloudfront.net/)

## 주요 개념

### GitHub Actions과 CI/CD 도구
**GitHub Actions**는 소프트웨어 개발 워크플로우를 자동화할 수 있는 도구입니다. GitHub 리포지토리에서 직접 작업을 정의하고, 트리거를 설정하여 다양한 이벤트에 따라 자동으로 작업을 실행할 수 있습니다. CI(Continuous Integration)와 CD(Continuous Deployment/Delivery)는 소프트웨어 개발의 핵심 개념으로, 코드를 자동으로 테스트하고 배포하는 과정을 통해 소프트웨어 품질을 높이고 배포 주기를 단축시킵니다.

**주요 특징:**
- **워크플로우 정의**: YAML 파일을 통해 워크플로우를 정의합니다.
- **트리거**: 푸시, 풀 리퀘스트, 일정 등 다양한 이벤트에 따라 워크플로우를 트리거할 수 있습니다.
- **액션**: 재사용 가능한 코드 조각으로, 커뮤니티에서 공유되거나 직접 작성할 수 있습니다.

### S3와 스토리지
**Amazon S3(Simple Storage Service)**는 AWS에서 제공하는 객체 스토리지 서비스입니다. 대규모 데이터를 안전하게 저장하고 관리할 수 있으며, 높은 가용성과 확장성을 제공합니다. 웹 애플리케이션, 백업 및 복구, 데이터 아카이빙 등 다양한 용도로 사용됩니다.

**주요 특징:**
- **객체 스토리지**: 파일을 객체 형태로 저장하며, 각각의 객체는 고유한 키를 가집니다.
- **내구성 및 가용성**: 높은 내구성(99.999999999%)과 가용성(99.99%)을 제공합니다.
- **비용 효율성**: 사용한 만큼만 비용을 지불하는 구조로, 데이터 저장 비용을 절감할 수 있습니다.

### CloudFront와 CDN
**Amazon CloudFront**는 전 세계에 분산된 데이터 센터를 통해 콘텐츠를 빠르고 안전하게 전달하는 CDN(Content Delivery Network) 서비스입니다. 웹 사이트, 동영상 스트리밍, API 등 다양한 콘텐츠를 글로벌 사용자에게 낮은 지연 시간으로 제공합니다.

**주요 특징:**
- **콘텐츠 캐싱**: 전 세계 엣지 로케이션에 콘텐츠를 캐싱하여 빠른 응답 속도를 제공합니다.
- **보안**: DDoS 공격 방어, SSL/TLS 암호화 등 보안 기능을 제공합니다.
- **통합**: S3, EC2, Elastic Load Balancing 등 다른 AWS 서비스와 원활하게 통합됩니다.

### 캐시 무효화(Cache Invalidation)
**캐시 무효화**는 CDN 또는 웹 서버에 캐시된 콘텐츠를 최신 상태로 유지하기 위해 사용되는 기법입니다. 콘텐츠가 업데이트되었을 때, 기존의 캐시된 버전을 무효화하여 새로운 콘텐츠를 사용자에게 제공할 수 있습니다.

**주요 방법:**
- **명시적 무효화**: 특정 파일 또는 경로를 지정하여 캐시를 무효화합니다.
- **TTL(Time-to-Live)**: 캐시된 콘텐츠의 유효 기간을 설정하여 자동으로 무효화되도록 합니다.
- **버전 관리**: 파일 이름 또는 경로에 버전을 추가하여 캐시를 무효화하는 방법입니다.

### Repository secret과 환경변수
**Repository secret**은 GitHub 리포지토리 내에서 민감한 정보를 안전하게 저장하고 사용할 수 있는 기능입니다. API 키, 비밀번호, 인증 토큰 등은 Repository secret에 저장하여 워크플로우에서 사용할 수 있습니다.

**환경변수**는 실행 환경에서 설정되는 변수로, 애플리케이션이 동작하는데 필요한 설정 정보를 포함합니다. 환경변수를 통해 코드에서 민감한 정보를 직접 다루지 않고, 실행 환경에 따라 설정을 변경할 수 있습니다.

**주요 특징:**
- **보안**: 민감한 정보를 코드에 직접 노출시키지 않고 안전하게 관리할 수 있습니다.
- **유연성**: 실행 환경에 따라 설정을 유연하게 변경할 수 있습니다.
- **재사용성**: 동일한 코드를 다양한 환경에서 재사용할 수 있습니다.

## 팁

- 팁1: 다이어그램 작성엔 Draw.io, Lucidchart 등을 이용합니다.
- 팁2: 새로운 프로젝트 진행시, 프론트엔드팀 리더는 예시에 있는 다이어그램을 준비한 후, 전사 회의에 들어가 발표하게 됩니다. 미리 팀장이 되었다 생각하고 아키텍쳐 도식화 하는걸 연습해봅시다.
- 팁3: 캐시 무효화는 장애 대응에 중요한 개념입니다. `.github/workflows/deployment.yml` 에서 캐시 무효화가 어떤 시점에 동작하는지 보고, 추가 리서치를 통해 반드시 개념을 이해하고 넘어갑시다.
- 팁4: 상용 프로젝트에선 DNS 서비스가 필요합니다. 도메인 구입이 필요해 본 과제에선 ‘Route53’을 붙이는걸 하지 않았지만, 실무에선 다음과 같은 인프라 구성이 필요하다는걸 알아둡시다.
